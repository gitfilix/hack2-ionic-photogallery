{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rubendiaz/projects/hackaton/hack2-ionic-photogallery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rubendiaz/projects/hackaton/hack2-ionic-photogallery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rubendiaz/projects/hackaton/hack2-ionic-photogallery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Geolocation}from'@ionic-native/geolocation';import{IonButton,IonLoading,IonToast}from'@ionic/react';import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GeolocationButton=function GeolocationButton(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({showError:false}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),position=_useState6[0],setPosition=_useState6[1];var getLocation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _position;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return Geolocation.getCurrentPosition();case 4:_position=_context.sent;setPosition(_position);setLoading(false);setError({showError:false});_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);setError({showError:true,message:_context.t0.message});setLoading(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function getLocation(){return _ref.apply(this,arguments);};}();var drawMap=function drawMap(latitude,longitude){var src='';return/*#__PURE__*/_jsx(\"iframe\",{width:\"450\",height:\"250\",src:\"https://www.google.com/maps/embed/v1/view?key=AIzaSyCAI-kfzVhSmr1aUJ4N-gLyjozI6OR8uZA&center=47.3771287,8.5255792&zoom=18&maptype=satellite\"});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IonLoading,{isOpen:loading,onDidDismiss:function onDidDismiss(){return setLoading(false);},message:'Getting Location...'}),/*#__PURE__*/_jsx(IonToast,{isOpen:error.showError,onDidDismiss:function onDidDismiss(){return setError({message:\"\",showError:false});},message:error.message,duration:3000}),/*#__PURE__*/_jsx(IonButton,{color:\"primary\",onClick:getLocation,children:position?\"Position: \".concat(position.coords.latitude,\" | \").concat(position.coords.longitude):\"Get Location\"}),position&&drawMap(position.coords.latitude,position.coords.longitude)]});};export default GeolocationButton;","map":{"version":3,"sources":["/Users/rubendiaz/projects/hackaton/hack2-ionic-photogallery/src/components/GeolocationButton.tsx"],"names":["Geolocation","IonButton","IonLoading","IonToast","React","useState","GeolocationButton","loading","setLoading","showError","error","setError","position","setPosition","getLocation","getCurrentPosition","message","drawMap","latitude","longitude","src","coords"],"mappings":"mhBAAA,OAASA,WAAT,KAAyC,2BAAzC,CACA,OAASC,SAAT,CAAoBC,UAApB,CAAgCC,QAAhC,KAAgD,cAAhD,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,C,6IAOA,GAAMC,CAAAA,iBAA2B,CAAG,QAA9BA,CAAAA,iBAA8B,EAAM,CACtC,cAA8BD,QAAQ,CAAU,KAAV,CAAtC,wCAAOE,OAAP,eAAgBC,UAAhB,eACA,eAA0BH,QAAQ,CAAgB,CAAEI,SAAS,CAAE,KAAb,CAAhB,CAAlC,yCAAOC,KAAP,eAAcC,QAAd,eACA,eAAgCN,QAAQ,EAAxC,yCAAOO,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,WAAW,0FAAG,iJAClBN,UAAU,CAAC,IAAD,CAAV,CADkB,sCAISR,CAAAA,WAAW,CAACe,kBAAZ,EAJT,QAIRH,SAJQ,eAKdC,WAAW,CAACD,SAAD,CAAX,CACAJ,UAAU,CAAC,KAAD,CAAV,CACAG,QAAQ,CAAC,CAAEF,SAAS,CAAE,KAAb,CAAD,CAAR,CAPc,iFASdE,QAAQ,CAAC,CAAEF,SAAS,CAAE,IAAb,CAAmBO,OAAO,CAAE,YAAEA,OAA9B,CAAD,CAAR,CACAR,UAAU,CAAC,KAAD,CAAV,CAVc,qEAAH,kBAAXM,CAAAA,WAAW,0CAAjB,CAcA,GAAMG,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,QAAD,CAAmBC,SAAnB,CAAyC,CACvD,GAAMC,CAAAA,GAAG,CAAG,EAAZ,CACA,mBACE,eACE,KAAK,CAAC,KADR,CAEE,MAAM,CAAC,KAFT,CAGE,GAAG,CAAC,6IAHN,EADF,CAOD,CATD,CAWA,mBACE,wCACI,KAAC,UAAD,EACI,MAAM,CAAEb,OADZ,CAEI,YAAY,CAAE,8BAAMC,CAAAA,UAAU,CAAC,KAAD,CAAhB,EAFlB,CAGI,OAAO,CAAE,qBAHb,EADJ,cAMI,KAAC,QAAD,EACI,MAAM,CAAEE,KAAK,CAACD,SADlB,CAEI,YAAY,CAAE,8BAAME,CAAAA,QAAQ,CAAC,CAAEK,OAAO,CAAE,EAAX,CAAeP,SAAS,CAAE,KAA1B,CAAD,CAAd,EAFlB,CAGI,OAAO,CAAEC,KAAK,CAACM,OAHnB,CAII,QAAQ,CAAE,IAJd,EANJ,cAYI,KAAC,SAAD,EAAW,KAAK,CAAC,SAAjB,CAA2B,OAAO,CAAEF,WAApC,UAAkDF,QAAQ,qBAAgBA,QAAQ,CAACS,MAAT,CAAgBH,QAAhC,eAA8CN,QAAQ,CAACS,MAAT,CAAgBF,SAA9D,EAA4E,cAAtI,EAZJ,CAaKP,QAAQ,EAAIK,OAAO,CAACL,QAAQ,CAACS,MAAT,CAAgBH,QAAjB,CAA2BN,QAAQ,CAACS,MAAT,CAAgBF,SAA3C,CAbxB,GADF,CAiBH,CA/CD,CAiDA,cAAeb,CAAAA,iBAAf","sourcesContent":["import { Geolocation, Geoposition } from '@ionic-native/geolocation';\nimport { IonButton, IonLoading, IonToast } from '@ionic/react';\nimport React, { useState } from 'react';\n\ninterface LocationError {\n    showError: boolean;\n    message?: string;\n}\n\nconst GeolocationButton: React.FC = () => {\n    const [loading, setLoading] = useState<boolean>(false);\n    const [error, setError] = useState<LocationError>({ showError: false });\n    const [position, setPosition] = useState<Geoposition>();\n\n    const getLocation = async () => {\n      setLoading(true);\n\n      try {\n          const position = await Geolocation.getCurrentPosition();\n          setPosition(position);\n          setLoading(false);\n          setError({ showError: false });\n      } catch (e) {\n          setError({ showError: true, message: e.message });\n          setLoading(false);\n      }\n    }\n\n    const drawMap = (latitude: number, longitude: number) => {\n      const src = ''\n      return (\n        <iframe\n          width=\"450\"\n          height=\"250\"\n          src=\"https://www.google.com/maps/embed/v1/view?key=AIzaSyCAI-kfzVhSmr1aUJ4N-gLyjozI6OR8uZA&center=47.3771287,8.5255792&zoom=18&maptype=satellite\">\n        </iframe>      \n      )\n    }\n\n    return (\n      <>\n          <IonLoading\n              isOpen={loading}\n              onDidDismiss={() => setLoading(false)}\n              message={'Getting Location...'}\n          />\n          <IonToast\n              isOpen={error.showError}\n              onDidDismiss={() => setError({ message: \"\", showError: false })}\n              message={error.message}\n              duration={3000}\n          />\n          <IonButton color=\"primary\" onClick={getLocation}>{position ? `Position: ${position.coords.latitude} | ${position.coords.longitude}` : \"Get Location\"}</IonButton>\n          {position && drawMap(position.coords.latitude, position.coords.longitude)}\n      </>\n    );\n};\n\nexport default GeolocationButton;"]},"metadata":{},"sourceType":"module"}