{"code":"(this[\"webpackJsonpphoto-gallery\"]=this[\"webpackJsonpphoto-gallery\"]||[]).push([[43],{167:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"FilesystemWeb\",(function(){return d}));var n=r(52),a=r(21),i=r(4),s=r.n(i),c=r(8),o=r(7),u=r(9),h=r(10),p=r(11),d=function(e){Object(h.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.apply(this,arguments)).DB_VERSION=1,e.DB_NAME=\"Disc\",e._writeCmds=[\"add\",\"put\",\"delete\"],e}return Object(u.a)(r,[{key:\"initDb\",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this._db){e.next=2;break}return e.abrupt(\"return\",this._db);case 2:if(\"indexedDB\"in window){e.next=4;break}throw this.unavailable(\"This browser doesn't support IndexedDB\");case 4:return e.abrupt(\"return\",new Promise((function(e,n){var a=indexedDB.open(t.DB_NAME,t.DB_VERSION);a.onupgradeneeded=r.doUpgrade,a.onsuccess=function(){t._db=a.result,e(a.result)},a.onerror=function(){return n(a.error)},a.onblocked=function(){console.warn(\"db blocked\")}})));case 5:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"dbRequest\",value:function(){var e=Object(c.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=-1!==this._writeCmds.indexOf(t)?\"readwrite\":\"readonly\",e.abrupt(\"return\",this.initDb().then((function(e){return new Promise((function(i,s){var c=e.transaction([\"FileStorage\"],n).objectStore(\"FileStorage\"),o=c[t].apply(c,Object(a.a)(r));o.onsuccess=function(){return i(o.result)},o.onerror=function(){return s(o.error)}}))})));case 2:case\"end\":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:\"dbIndexRequest\",value:function(){var e=Object(c.a)(s.a.mark((function e(t,r,n){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=-1!==this._writeCmds.indexOf(r)?\"readwrite\":\"readonly\",e.abrupt(\"return\",this.initDb().then((function(e){return new Promise((function(s,c){var o=e.transaction([\"FileStorage\"],i).objectStore(\"FileStorage\").index(t),u=o[r].apply(o,Object(a.a)(n));u.onsuccess=function(){return s(u.result)},u.onerror=function(){return c(u.error)}}))})));case 2:case\"end\":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:\"getPath\",value:function(e,t){var r=void 0!==t?t.replace(/^[/]+|[/]+$/g,\"\"):\"\",n=\"\";return void 0!==e&&(n+=\"/\"+e),\"\"!==t&&(n+=\"/\"+r),n}},{key:\"clear\",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initDb();case 2:t=e.sent,r=t.transaction([\"FileStorage\"],\"readwrite\"),r.objectStore(\"FileStorage\").clear();case 6:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"readFile\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getPath(t.directory,t.path),e.next=3,this.dbRequest(\"get\",[r]);case 3:if(void 0!==(n=e.sent)){e.next=6;break}throw Error(\"File does not exist.\");case 6:return e.abrupt(\"return\",{data:n.content?n.content:\"\"});case 7:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"writeFile\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r,n,a,i,c,o,u,h,p,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getPath(t.directory,t.path),n=t.data,a=t.recursive,e.next=5,this.dbRequest(\"get\",[r]);case 5:if(!(i=e.sent)||\"directory\"!==i.type){e.next=8;break}throw\"The supplied path is a directory.\";case 8:return c=t.encoding,o=r.substr(0,r.lastIndexOf(\"/\")),e.next=12,this.dbRequest(\"get\",[o]);case 12:if(void 0!==e.sent){e.next=19;break}if(-1===(u=o.indexOf(\"/\",1))){e.next=19;break}return h=o.substr(u),e.next=19,this.mkdir({path:h,directory:t.directory,recursive:a});case 19:return p=Date.now(),d={path:r,folder:o,type:\"file\",size:n.length,ctime:p,mtime:p,content:!c&&n.indexOf(\",\")>=0?n.split(\",\")[1]:n},e.next=23,this.dbRequest(\"put\",[d]);case 23:return e.abrupt(\"return\",{uri:d.path});case 24:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"appendFile\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r,n,a,i,c,o,u,h,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getPath(t.directory,t.path),n=t.data,a=r.substr(0,r.lastIndexOf(\"/\")),i=Date.now(),c=i,e.next=7,this.dbRequest(\"get\",[r]);case 7:if(!(o=e.sent)||\"directory\"!==o.type){e.next=10;break}throw\"The supplied path is a directory.\";case 10:return e.next=12,this.dbRequest(\"get\",[a]);case 12:if(void 0!==e.sent){e.next=19;break}if(-1===(u=a.indexOf(\"/\",1))){e.next=19;break}return h=a.substr(u),e.next=19,this.mkdir({path:h,directory:t.directory,recursive:!0});case 19:return void 0!==o&&(n=o.content+n,c=o.ctime),p={path:r,folder:a,type:\"file\",size:n.length,ctime:c,mtime:i,content:n},e.next=23,this.dbRequest(\"put\",[p]);case 23:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"deleteFile\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getPath(t.directory,t.path),e.next=3,this.dbRequest(\"get\",[r]);case 3:if(void 0!==e.sent){e.next=6;break}throw Error(\"File does not exist.\");case 6:return e.next=8,this.dbIndexRequest(\"by_folder\",\"getAllKeys\",[IDBKeyRange.only(r)]);case 8:if(0===e.sent.length){e.next=11;break}throw Error(\"Folder is not empty.\");case 11:return e.next=13,this.dbRequest(\"delete\",[r]);case 13:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"mkdir\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r,n,a,i,c,o,u,h,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getPath(t.directory,t.path),n=t.recursive,a=r.substr(0,r.lastIndexOf(\"/\")),i=(r.match(/\\//g)||[]).length,e.next=6,this.dbRequest(\"get\",[a]);case 6:return c=e.sent,e.next=9,this.dbRequest(\"get\",[r]);case 9:if(o=e.sent,1!==i){e.next=12;break}throw Error(\"Cannot create Root directory\");case 12:if(void 0===o){e.next=14;break}throw Error(\"Current directory does already exist.\");case 14:if(n||2===i||void 0!==c){e.next=16;break}throw Error(\"Parent directory must exist\");case 16:if(!n||2===i||void 0!==c){e.next=20;break}return u=a.substr(a.indexOf(\"/\",1)),e.next=20,this.mkdir({path:u,directory:t.directory,recursive:n});case 20:return h=Date.now(),p={path:r,folder:a,type:\"directory\",size:0,ctime:h,mtime:h},e.next=24,this.dbRequest(\"put\",[p]);case 24:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"rmdir\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r,a,i,c,o,u,h,p,d,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,a=t.directory,i=t.recursive,c=this.getPath(a,r),e.next=4,this.dbRequest(\"get\",[c]);case 4:if(void 0!==(o=e.sent)){e.next=7;break}throw Error(\"Folder does not exist.\");case 7:if(\"directory\"===o.type){e.next=9;break}throw Error(\"Requested path is not a directory\");case 9:return e.next=11,this.readdir({path:r,directory:a});case 11:if(0===(u=e.sent).files.length||i){e.next=14;break}throw Error(\"Folder is not empty\");case 14:h=Object(n.a)(u.files),e.prev=15,h.s();case 17:if((p=h.n()).done){e.next=32;break}return d=p.value,f=\"\".concat(r,\"/\").concat(d),e.next=22,this.stat({path:f,directory:a});case 22:if(\"file\"!==e.sent.type){e.next=28;break}return e.next=26,this.deleteFile({path:f,directory:a});case 26:e.next=30;break;case 28:return e.next=30,this.rmdir({path:f,directory:a,recursive:i});case 30:e.next=17;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(15),h.e(e.t0);case 37:return e.prev=37,h.f(),e.finish(37);case 40:return e.next=42,this.dbRequest(\"delete\",[c]);case 42:case\"end\":return e.stop()}}),e,this,[[15,34,37,40]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"readdir\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r,n,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getPath(t.directory,t.path),e.next=3,this.dbRequest(\"get\",[r]);case 3:if(n=e.sent,\"\"===t.path||void 0!==n){e.next=6;break}throw Error(\"Folder does not exist.\");case 6:return e.next=8,this.dbIndexRequest(\"by_folder\",\"getAllKeys\",[IDBKeyRange.only(r)]);case 8:return a=e.sent,i=a.map((function(e){return e.substring(r.length+1)})),e.abrupt(\"return\",{files:i});case 11:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getUri\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getPath(t.directory,t.path),e.next=3,this.dbRequest(\"get\",[r]);case 3:if(void 0!==(n=e.sent)){e.next=8;break}return e.next=7,this.dbRequest(\"get\",[r+\"/\"]);case 7:n=e.sent;case 8:return e.abrupt(\"return\",{uri:(null===n||void 0===n?void 0:n.path)||r});case 9:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"stat\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getPath(t.directory,t.path),e.next=3,this.dbRequest(\"get\",[r]);case 3:if(void 0!==(n=e.sent)){e.next=8;break}return e.next=7,this.dbRequest(\"get\",[r+\"/\"]);case 7:n=e.sent;case 8:if(void 0!==n){e.next=10;break}throw Error(\"Entry does not exist.\");case 10:return e.abrupt(\"return\",{type:n.type,size:n.size,ctime:n.ctime,mtime:n.mtime,uri:n.path});case 11:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"rename\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",this._copy(t,!0));case 1:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"copy\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",this._copy(t,!1));case 1:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"requestPermissions\",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",{publicStorage:\"granted\"});case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:\"checkPermissions\",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",{publicStorage:\"granted\"});case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:\"_copy\",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var r,a,i,o,u,h,p,d,f,b,l,x,y,v,k,w,m,g,O=this,j=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=j.length>1&&void 0!==j[1]&&j[1],a=t.toDirectory,i=t.to,o=t.from,u=t.directory,i&&o){e.next=5;break}throw Error(\"Both to and from must be provided\");case 5:if(a||(a=u),h=this.getPath(u,o),p=this.getPath(a,i),h!==p){e.next=10;break}return e.abrupt(\"return\");case 10:if(!p.startsWith(h)){e.next=12;break}throw Error(\"To path cannot contain the from path\");case 12:return e.prev=12,e.next=15,this.stat({path:i,directory:a});case 15:d=e.sent,e.next=29;break;case 18:if(e.prev=18,e.t0=e.catch(12),(f=i.split(\"/\")).pop(),b=f.join(\"/\"),!(f.length>0)){e.next=29;break}return e.next=26,this.stat({path:b,directory:a});case 26:if(\"directory\"===e.sent.type){e.next=29;break}throw new Error(\"Parent directory of the to path is a file\");case 29:if(!d||\"directory\"!==d.type){e.next=31;break}throw new Error(\"Cannot overwrite a directory with a file\");case 31:return e.next=33,this.stat({path:o,directory:u});case 33:l=e.sent,x=function(){var e=Object(c.a)(s.a.mark((function e(t,r,n){var i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=O.getPath(a,t),e.next=3,O.dbRequest(\"get\",[i]);case 3:return(c=e.sent).ctime=r,c.mtime=n,e.next=8,O.dbRequest(\"put\",[c]);case 8:case\"end\":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),y=l.ctime?l.ctime:Date.now(),e.t1=l.type,e.next=\"file\"===e.t1?39:\"directory\"===e.t1?51:86;break;case 39:return e.next=41,this.readFile({path:o,directory:u});case 41:if(v=e.sent,!r){e.next=45;break}return e.next=45,this.deleteFile({path:o,directory:u});case 45:return e.next=47,this.writeFile({path:i,directory:a,data:v.data});case 47:if(!r){e.next=50;break}return e.next=50,x(i,y,l.mtime);case 50:return e.abrupt(\"return\");case 51:if(!d){e.next=53;break}throw Error(\"Cannot move a directory over an existing object\");case 53:return e.prev=53,e.next=56,this.mkdir({path:i,directory:a,recursive:!1});case 56:if(!r){e.next=59;break}return e.next=59,x(i,y,l.mtime);case 59:e.next=63;break;case 61:e.prev=61,e.t2=e.catch(53);case 63:return e.next=65,this.readdir({path:o,directory:u});case 65:k=e.sent.files,w=Object(n.a)(k),e.prev=67,w.s();case 69:if((m=w.n()).done){e.next=75;break}return g=m.value,e.next=73,this._copy({from:\"\".concat(o,\"/\").concat(g),to:\"\".concat(i,\"/\").concat(g),directory:u,toDirectory:a},r);case 73:e.next=69;break;case 75:e.next=80;break;case 77:e.prev=77,e.t3=e.catch(67),w.e(e.t3);case 80:return e.prev=80,w.f(),e.finish(80);case 83:if(!r){e.next=86;break}return e.next=86,this.rmdir({path:o,directory:u});case 86:case\"end\":return e.stop()}}),e,this,[[12,18],[53,61],[67,77,80,83]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:\"doUpgrade\",value:function(e){var t=e.target.result;switch(e.oldVersion){case 0:case 1:default:t.objectStoreNames.contains(\"FileStorage\")&&t.deleteObjectStore(\"FileStorage\"),t.createObjectStore(\"FileStorage\",{keyPath:\"path\"}).createIndex(\"by_folder\",\"folder\")}}}]),r}(r(24).c);d._debug=!0}}]);","name":"static/js/43.a139df99.chunk.js","map":{"version":3,"sources":["static/js/43.a139df99.chunk.js"],"names":["this","push","167","module","__webpack_exports__","__webpack_require__","r","d","FilesystemWeb","_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__","_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__","_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","n","_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__","_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__","_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__","_WebPlugin","Object","_super","_this","apply","arguments","DB_VERSION","DB_NAME","_writeCmds","key","value","_initDb","a","mark","_callee","_this2","wrap","_context","prev","next","undefined","_db","abrupt","window","unavailable","Promise","resolve","reject","request","indexedDB","open","onupgradeneeded","doUpgrade","onsuccess","result","onerror","error","onblocked","console","warn","stop","_dbRequest","_callee2","cmd","args","readFlag","_context2","indexOf","initDb","then","conn","store","transaction","objectStore","req","_x","_x2","_dbIndexRequest","_callee3","indexName","_context3","index","_x3","_x4","_x5","directory","uriPath","cleanedUriPath","replace","fsPath","_clear","_callee4","tx","_context4","sent","clear","_readFile","_callee5","options","path","entry","_context5","getPath","dbRequest","Error","data","content","_x6","_writeFile","_callee6","doRecursive","occupiedEntry","encoding","parentPath","subDirIndex","parentArgPath","now","pathObj","_context6","recursive","type","substr","lastIndexOf","mkdir","Date","folder","size","length","ctime","mtime","split","uri","_x7","_appendFile","_callee7","_context7","_x8","_deleteFile","_callee8","_context8","dbIndexRequest","IDBKeyRange","only","_x9","_mkdir","_callee9","depth","parentEntry","_context9","match","_x10","_rmdir","_callee10","fullPath","readDirResult","_iterator","_step","_entry","entryPath","_context10","readdir","files","s","done","concat","stat","deleteFile","rmdir","t0","e","f","finish","_x11","_readdir","_callee11","entries","names","_context11","map","substring","_x12","_getUri","_callee12","_context12","_x13","_stat","_callee13","_context13","_x14","_rename","_callee14","_context14","_copy","_x15","_copy2","_callee15","_context15","_x16","_requestPermissions","_callee16","_context16","publicStorage","_checkPermissions","_callee17","_context17","_copy3","_callee19","doRename","toDirectory","to","from","fromDirectory","fromPath","toPath","toObj","toPathComponents","_toPath","fromObj","updateTime","file","contents","_iterator2","_step2","filename","_this3","_args19","_context19","startsWith","pop","join","_ref","_callee18","_context18","_x18","_x19","_x20","t1","readFile","writeFile","t2","t3","_x17","event","db","target","oldVersion","objectStoreNames","contains","deleteObjectStore","createObjectStore","keyPath","createIndex","_debug"],"mappings":"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"},"input":"(this[\"webpackJsonpphoto-gallery\"] = this[\"webpackJsonpphoto-gallery\"] || []).push([[43],{\n\n/***/ 167:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FilesystemWeb\", function() { return FilesystemWeb; });\n/* harmony import */ var _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52);\n/* harmony import */ var _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21);\n/* harmony import */ var _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);\n/* harmony import */ var _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8);\n/* harmony import */ var _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(7);\n/* harmony import */ var _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9);\n/* harmony import */ var _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(10);\n/* harmony import */ var _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(11);\n/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(24);\n\n\n\n\n\n\n\n\n\nvar FilesystemWeb = /*#__PURE__*/function (_WebPlugin) {\n  Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])(FilesystemWeb, _WebPlugin);\n\n  var _super = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])(FilesystemWeb);\n\n  function FilesystemWeb() {\n    var _this;\n\n    Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(this, FilesystemWeb);\n\n    _this = _super.apply(this, arguments);\n    _this.DB_VERSION = 1;\n    _this.DB_NAME = 'Disc';\n    _this._writeCmds = ['add', 'put', 'delete'];\n    return _this;\n  }\n\n  Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(FilesystemWeb, [{\n    key: \"initDb\",\n    value: function () {\n      var _initDb = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {\n        var _this2 = this;\n\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this._db !== undefined)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this._db);\n\n              case 2:\n                if ('indexedDB' in window) {\n                  _context.next = 4;\n                  break;\n                }\n\n                throw this.unavailable(\"This browser doesn't support IndexedDB\");\n\n              case 4:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  var request = indexedDB.open(_this2.DB_NAME, _this2.DB_VERSION);\n                  request.onupgradeneeded = FilesystemWeb.doUpgrade;\n\n                  request.onsuccess = function () {\n                    _this2._db = request.result;\n                    resolve(request.result);\n                  };\n\n                  request.onerror = function () {\n                    return reject(request.error);\n                  };\n\n                  request.onblocked = function () {\n                    console.warn('db blocked');\n                  };\n                }));\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function initDb() {\n        return _initDb.apply(this, arguments);\n      }\n\n      return initDb;\n    }()\n  }, {\n    key: \"dbRequest\",\n    value: function () {\n      var _dbRequest = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(cmd, args) {\n        var readFlag;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                readFlag = this._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';\n                return _context2.abrupt(\"return\", this.initDb().then(function (conn) {\n                  return new Promise(function (resolve, reject) {\n                    var tx = conn.transaction(['FileStorage'], readFlag);\n                    var store = tx.objectStore('FileStorage');\n                    var req = store[cmd].apply(store, Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(args));\n\n                    req.onsuccess = function () {\n                      return resolve(req.result);\n                    };\n\n                    req.onerror = function () {\n                      return reject(req.error);\n                    };\n                  });\n                }));\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function dbRequest(_x, _x2) {\n        return _dbRequest.apply(this, arguments);\n      }\n\n      return dbRequest;\n    }()\n  }, {\n    key: \"dbIndexRequest\",\n    value: function () {\n      var _dbIndexRequest = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(indexName, cmd, args) {\n        var readFlag;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                readFlag = this._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';\n                return _context3.abrupt(\"return\", this.initDb().then(function (conn) {\n                  return new Promise(function (resolve, reject) {\n                    var tx = conn.transaction(['FileStorage'], readFlag);\n                    var store = tx.objectStore('FileStorage');\n                    var index = store.index(indexName);\n                    var req = index[cmd].apply(index, Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(args));\n\n                    req.onsuccess = function () {\n                      return resolve(req.result);\n                    };\n\n                    req.onerror = function () {\n                      return reject(req.error);\n                    };\n                  });\n                }));\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function dbIndexRequest(_x3, _x4, _x5) {\n        return _dbIndexRequest.apply(this, arguments);\n      }\n\n      return dbIndexRequest;\n    }()\n  }, {\n    key: \"getPath\",\n    value: function getPath(directory, uriPath) {\n      var cleanedUriPath = uriPath !== undefined ? uriPath.replace(/^[/]+|[/]+$/g, '') : '';\n      var fsPath = '';\n      if (directory !== undefined) fsPath += '/' + directory;\n      if (uriPath !== '') fsPath += '/' + cleanedUriPath;\n      return fsPath;\n    }\n  }, {\n    key: \"clear\",\n    value: function () {\n      var _clear = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4() {\n        var conn, tx, store;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.initDb();\n\n              case 2:\n                conn = _context4.sent;\n                tx = conn.transaction(['FileStorage'], 'readwrite');\n                store = tx.objectStore('FileStorage');\n                store.clear();\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function clear() {\n        return _clear.apply(this, arguments);\n      }\n\n      return clear;\n    }()\n    /**\n     * Read a file from disk\n     * @param options options for the file read\n     * @return a promise that resolves with the read file data result\n     */\n\n  }, {\n    key: \"readFile\",\n    value: function () {\n      var _readFile = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee5(options) {\n        var path, entry;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                path = this.getPath(options.directory, options.path); // const encoding = options.encoding;\n\n                _context5.next = 3;\n                return this.dbRequest('get', [path]);\n\n              case 3:\n                entry = _context5.sent;\n\n                if (!(entry === undefined)) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                throw Error('File does not exist.');\n\n              case 6:\n                return _context5.abrupt(\"return\", {\n                  data: entry.content ? entry.content : ''\n                });\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function readFile(_x6) {\n        return _readFile.apply(this, arguments);\n      }\n\n      return readFile;\n    }()\n    /**\n     * Write a file to disk in the specified location on device\n     * @param options options for the file write\n     * @return a promise that resolves with the file write result\n     */\n\n  }, {\n    key: \"writeFile\",\n    value: function () {\n      var _writeFile = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee6(options) {\n        var path, data, doRecursive, occupiedEntry, encoding, parentPath, parentEntry, subDirIndex, parentArgPath, now, pathObj;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                path = this.getPath(options.directory, options.path);\n                data = options.data;\n                doRecursive = options.recursive;\n                _context6.next = 5;\n                return this.dbRequest('get', [path]);\n\n              case 5:\n                occupiedEntry = _context6.sent;\n\n                if (!(occupiedEntry && occupiedEntry.type === 'directory')) {\n                  _context6.next = 8;\n                  break;\n                }\n\n                throw 'The supplied path is a directory.';\n\n              case 8:\n                encoding = options.encoding;\n                parentPath = path.substr(0, path.lastIndexOf('/'));\n                _context6.next = 12;\n                return this.dbRequest('get', [parentPath]);\n\n              case 12:\n                parentEntry = _context6.sent;\n\n                if (!(parentEntry === undefined)) {\n                  _context6.next = 19;\n                  break;\n                }\n\n                subDirIndex = parentPath.indexOf('/', 1);\n\n                if (!(subDirIndex !== -1)) {\n                  _context6.next = 19;\n                  break;\n                }\n\n                parentArgPath = parentPath.substr(subDirIndex);\n                _context6.next = 19;\n                return this.mkdir({\n                  path: parentArgPath,\n                  directory: options.directory,\n                  recursive: doRecursive\n                });\n\n              case 19:\n                now = Date.now();\n                pathObj = {\n                  path: path,\n                  folder: parentPath,\n                  type: 'file',\n                  size: data.length,\n                  ctime: now,\n                  mtime: now,\n                  content: !encoding && data.indexOf(',') >= 0 ? data.split(',')[1] : data\n                };\n                _context6.next = 23;\n                return this.dbRequest('put', [pathObj]);\n\n              case 23:\n                return _context6.abrupt(\"return\", {\n                  uri: pathObj.path\n                });\n\n              case 24:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function writeFile(_x7) {\n        return _writeFile.apply(this, arguments);\n      }\n\n      return writeFile;\n    }()\n    /**\n     * Append to a file on disk in the specified location on device\n     * @param options options for the file append\n     * @return a promise that resolves with the file write result\n     */\n\n  }, {\n    key: \"appendFile\",\n    value: function () {\n      var _appendFile = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee7(options) {\n        var path, data, parentPath, now, ctime, occupiedEntry, parentEntry, subDirIndex, parentArgPath, pathObj;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                path = this.getPath(options.directory, options.path);\n                data = options.data; // const encoding = options.encoding;\n\n                parentPath = path.substr(0, path.lastIndexOf('/'));\n                now = Date.now();\n                ctime = now;\n                _context7.next = 7;\n                return this.dbRequest('get', [path]);\n\n              case 7:\n                occupiedEntry = _context7.sent;\n\n                if (!(occupiedEntry && occupiedEntry.type === 'directory')) {\n                  _context7.next = 10;\n                  break;\n                }\n\n                throw 'The supplied path is a directory.';\n\n              case 10:\n                _context7.next = 12;\n                return this.dbRequest('get', [parentPath]);\n\n              case 12:\n                parentEntry = _context7.sent;\n\n                if (!(parentEntry === undefined)) {\n                  _context7.next = 19;\n                  break;\n                }\n\n                subDirIndex = parentPath.indexOf('/', 1);\n\n                if (!(subDirIndex !== -1)) {\n                  _context7.next = 19;\n                  break;\n                }\n\n                parentArgPath = parentPath.substr(subDirIndex);\n                _context7.next = 19;\n                return this.mkdir({\n                  path: parentArgPath,\n                  directory: options.directory,\n                  recursive: true\n                });\n\n              case 19:\n                if (occupiedEntry !== undefined) {\n                  data = occupiedEntry.content + data;\n                  ctime = occupiedEntry.ctime;\n                }\n\n                pathObj = {\n                  path: path,\n                  folder: parentPath,\n                  type: 'file',\n                  size: data.length,\n                  ctime: ctime,\n                  mtime: now,\n                  content: data\n                };\n                _context7.next = 23;\n                return this.dbRequest('put', [pathObj]);\n\n              case 23:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function appendFile(_x8) {\n        return _appendFile.apply(this, arguments);\n      }\n\n      return appendFile;\n    }()\n    /**\n     * Delete a file from disk\n     * @param options options for the file delete\n     * @return a promise that resolves with the deleted file data result\n     */\n\n  }, {\n    key: \"deleteFile\",\n    value: function () {\n      var _deleteFile = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee8(options) {\n        var path, entry, entries;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                path = this.getPath(options.directory, options.path);\n                _context8.next = 3;\n                return this.dbRequest('get', [path]);\n\n              case 3:\n                entry = _context8.sent;\n\n                if (!(entry === undefined)) {\n                  _context8.next = 6;\n                  break;\n                }\n\n                throw Error('File does not exist.');\n\n              case 6:\n                _context8.next = 8;\n                return this.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)]);\n\n              case 8:\n                entries = _context8.sent;\n\n                if (!(entries.length !== 0)) {\n                  _context8.next = 11;\n                  break;\n                }\n\n                throw Error('Folder is not empty.');\n\n              case 11:\n                _context8.next = 13;\n                return this.dbRequest('delete', [path]);\n\n              case 13:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function deleteFile(_x9) {\n        return _deleteFile.apply(this, arguments);\n      }\n\n      return deleteFile;\n    }()\n    /**\n     * Create a directory.\n     * @param options options for the mkdir\n     * @return a promise that resolves with the mkdir result\n     */\n\n  }, {\n    key: \"mkdir\",\n    value: function () {\n      var _mkdir = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee9(options) {\n        var path, doRecursive, parentPath, depth, parentEntry, occupiedEntry, parentArgPath, now, pathObj;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                path = this.getPath(options.directory, options.path);\n                doRecursive = options.recursive;\n                parentPath = path.substr(0, path.lastIndexOf('/'));\n                depth = (path.match(/\\//g) || []).length;\n                _context9.next = 6;\n                return this.dbRequest('get', [parentPath]);\n\n              case 6:\n                parentEntry = _context9.sent;\n                _context9.next = 9;\n                return this.dbRequest('get', [path]);\n\n              case 9:\n                occupiedEntry = _context9.sent;\n\n                if (!(depth === 1)) {\n                  _context9.next = 12;\n                  break;\n                }\n\n                throw Error('Cannot create Root directory');\n\n              case 12:\n                if (!(occupiedEntry !== undefined)) {\n                  _context9.next = 14;\n                  break;\n                }\n\n                throw Error('Current directory does already exist.');\n\n              case 14:\n                if (!(!doRecursive && depth !== 2 && parentEntry === undefined)) {\n                  _context9.next = 16;\n                  break;\n                }\n\n                throw Error('Parent directory must exist');\n\n              case 16:\n                if (!(doRecursive && depth !== 2 && parentEntry === undefined)) {\n                  _context9.next = 20;\n                  break;\n                }\n\n                parentArgPath = parentPath.substr(parentPath.indexOf('/', 1));\n                _context9.next = 20;\n                return this.mkdir({\n                  path: parentArgPath,\n                  directory: options.directory,\n                  recursive: doRecursive\n                });\n\n              case 20:\n                now = Date.now();\n                pathObj = {\n                  path: path,\n                  folder: parentPath,\n                  type: 'directory',\n                  size: 0,\n                  ctime: now,\n                  mtime: now\n                };\n                _context9.next = 24;\n                return this.dbRequest('put', [pathObj]);\n\n              case 24:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function mkdir(_x10) {\n        return _mkdir.apply(this, arguments);\n      }\n\n      return mkdir;\n    }()\n    /**\n     * Remove a directory\n     * @param options the options for the directory remove\n     */\n\n  }, {\n    key: \"rmdir\",\n    value: function () {\n      var _rmdir = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee10(options) {\n        var path, directory, recursive, fullPath, entry, readDirResult, _iterator, _step, _entry, entryPath, entryObj;\n\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                path = options.path, directory = options.directory, recursive = options.recursive;\n                fullPath = this.getPath(directory, path);\n                _context10.next = 4;\n                return this.dbRequest('get', [fullPath]);\n\n              case 4:\n                entry = _context10.sent;\n\n                if (!(entry === undefined)) {\n                  _context10.next = 7;\n                  break;\n                }\n\n                throw Error('Folder does not exist.');\n\n              case 7:\n                if (!(entry.type !== 'directory')) {\n                  _context10.next = 9;\n                  break;\n                }\n\n                throw Error('Requested path is not a directory');\n\n              case 9:\n                _context10.next = 11;\n                return this.readdir({\n                  path: path,\n                  directory: directory\n                });\n\n              case 11:\n                readDirResult = _context10.sent;\n\n                if (!(readDirResult.files.length !== 0 && !recursive)) {\n                  _context10.next = 14;\n                  break;\n                }\n\n                throw Error('Folder is not empty');\n\n              case 14:\n                _iterator = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(readDirResult.files);\n                _context10.prev = 15;\n\n                _iterator.s();\n\n              case 17:\n                if ((_step = _iterator.n()).done) {\n                  _context10.next = 32;\n                  break;\n                }\n\n                _entry = _step.value;\n                entryPath = \"\".concat(path, \"/\").concat(_entry);\n                _context10.next = 22;\n                return this.stat({\n                  path: entryPath,\n                  directory: directory\n                });\n\n              case 22:\n                entryObj = _context10.sent;\n\n                if (!(entryObj.type === 'file')) {\n                  _context10.next = 28;\n                  break;\n                }\n\n                _context10.next = 26;\n                return this.deleteFile({\n                  path: entryPath,\n                  directory: directory\n                });\n\n              case 26:\n                _context10.next = 30;\n                break;\n\n              case 28:\n                _context10.next = 30;\n                return this.rmdir({\n                  path: entryPath,\n                  directory: directory,\n                  recursive: recursive\n                });\n\n              case 30:\n                _context10.next = 17;\n                break;\n\n              case 32:\n                _context10.next = 37;\n                break;\n\n              case 34:\n                _context10.prev = 34;\n                _context10.t0 = _context10[\"catch\"](15);\n\n                _iterator.e(_context10.t0);\n\n              case 37:\n                _context10.prev = 37;\n\n                _iterator.f();\n\n                return _context10.finish(37);\n\n              case 40:\n                _context10.next = 42;\n                return this.dbRequest('delete', [fullPath]);\n\n              case 42:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this, [[15, 34, 37, 40]]);\n      }));\n\n      function rmdir(_x11) {\n        return _rmdir.apply(this, arguments);\n      }\n\n      return rmdir;\n    }()\n    /**\n     * Return a list of files from the directory (not recursive)\n     * @param options the options for the readdir operation\n     * @return a promise that resolves with the readdir directory listing result\n     */\n\n  }, {\n    key: \"readdir\",\n    value: function () {\n      var _readdir = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee11(options) {\n        var path, entry, entries, names;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                path = this.getPath(options.directory, options.path);\n                _context11.next = 3;\n                return this.dbRequest('get', [path]);\n\n              case 3:\n                entry = _context11.sent;\n\n                if (!(options.path !== '' && entry === undefined)) {\n                  _context11.next = 6;\n                  break;\n                }\n\n                throw Error('Folder does not exist.');\n\n              case 6:\n                _context11.next = 8;\n                return this.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)]);\n\n              case 8:\n                entries = _context11.sent;\n                names = entries.map(function (e) {\n                  return e.substring(path.length + 1);\n                });\n                return _context11.abrupt(\"return\", {\n                  files: names\n                });\n\n              case 11:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function readdir(_x12) {\n        return _readdir.apply(this, arguments);\n      }\n\n      return readdir;\n    }()\n    /**\n     * Return full File URI for a path and directory\n     * @param options the options for the stat operation\n     * @return a promise that resolves with the file stat result\n     */\n\n  }, {\n    key: \"getUri\",\n    value: function () {\n      var _getUri = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee12(options) {\n        var path, entry;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                path = this.getPath(options.directory, options.path);\n                _context12.next = 3;\n                return this.dbRequest('get', [path]);\n\n              case 3:\n                entry = _context12.sent;\n\n                if (!(entry === undefined)) {\n                  _context12.next = 8;\n                  break;\n                }\n\n                _context12.next = 7;\n                return this.dbRequest('get', [path + '/']);\n\n              case 7:\n                entry = _context12.sent;\n\n              case 8:\n                return _context12.abrupt(\"return\", {\n                  uri: (entry === null || entry === void 0 ? void 0 : entry.path) || path\n                });\n\n              case 9:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function getUri(_x13) {\n        return _getUri.apply(this, arguments);\n      }\n\n      return getUri;\n    }()\n    /**\n     * Return data about a file\n     * @param options the options for the stat operation\n     * @return a promise that resolves with the file stat result\n     */\n\n  }, {\n    key: \"stat\",\n    value: function () {\n      var _stat = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee13(options) {\n        var path, entry;\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                path = this.getPath(options.directory, options.path);\n                _context13.next = 3;\n                return this.dbRequest('get', [path]);\n\n              case 3:\n                entry = _context13.sent;\n\n                if (!(entry === undefined)) {\n                  _context13.next = 8;\n                  break;\n                }\n\n                _context13.next = 7;\n                return this.dbRequest('get', [path + '/']);\n\n              case 7:\n                entry = _context13.sent;\n\n              case 8:\n                if (!(entry === undefined)) {\n                  _context13.next = 10;\n                  break;\n                }\n\n                throw Error('Entry does not exist.');\n\n              case 10:\n                return _context13.abrupt(\"return\", {\n                  type: entry.type,\n                  size: entry.size,\n                  ctime: entry.ctime,\n                  mtime: entry.mtime,\n                  uri: entry.path\n                });\n\n              case 11:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function stat(_x14) {\n        return _stat.apply(this, arguments);\n      }\n\n      return stat;\n    }()\n    /**\n     * Rename a file or directory\n     * @param options the options for the rename operation\n     * @return a promise that resolves with the rename result\n     */\n\n  }, {\n    key: \"rename\",\n    value: function () {\n      var _rename = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee14(options) {\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                return _context14.abrupt(\"return\", this._copy(options, true));\n\n              case 1:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function rename(_x15) {\n        return _rename.apply(this, arguments);\n      }\n\n      return rename;\n    }()\n    /**\n     * Copy a file or directory\n     * @param options the options for the copy operation\n     * @return a promise that resolves with the copy result\n     */\n\n  }, {\n    key: \"copy\",\n    value: function () {\n      var _copy2 = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee15(options) {\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                return _context15.abrupt(\"return\", this._copy(options, false));\n\n              case 1:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      function copy(_x16) {\n        return _copy2.apply(this, arguments);\n      }\n\n      return copy;\n    }()\n  }, {\n    key: \"requestPermissions\",\n    value: function () {\n      var _requestPermissions = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee16() {\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                return _context16.abrupt(\"return\", {\n                  publicStorage: 'granted'\n                });\n\n              case 1:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16);\n      }));\n\n      function requestPermissions() {\n        return _requestPermissions.apply(this, arguments);\n      }\n\n      return requestPermissions;\n    }()\n  }, {\n    key: \"checkPermissions\",\n    value: function () {\n      var _checkPermissions = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee17() {\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                return _context17.abrupt(\"return\", {\n                  publicStorage: 'granted'\n                });\n\n              case 1:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17);\n      }));\n\n      function checkPermissions() {\n        return _checkPermissions.apply(this, arguments);\n      }\n\n      return checkPermissions;\n    }()\n    /**\n     * Function that can perform a copy or a rename\n     * @param options the options for the rename operation\n     * @param doRename whether to perform a rename or copy operation\n     * @return a promise that resolves with the result\n     */\n\n  }, {\n    key: \"_copy\",\n    value: function () {\n      var _copy3 = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee19(options) {\n        var _this3 = this;\n\n        var doRename,\n            toDirectory,\n            to,\n            from,\n            fromDirectory,\n            fromPath,\n            toPath,\n            toObj,\n            toPathComponents,\n            _toPath,\n            toParentDirectory,\n            fromObj,\n            updateTime,\n            ctime,\n            file,\n            contents,\n            _iterator2,\n            _step2,\n            filename,\n            _args19 = arguments;\n\n        return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                doRename = _args19.length > 1 && _args19[1] !== undefined ? _args19[1] : false;\n                toDirectory = options.toDirectory;\n                to = options.to, from = options.from, fromDirectory = options.directory;\n\n                if (!(!to || !from)) {\n                  _context19.next = 5;\n                  break;\n                }\n\n                throw Error('Both to and from must be provided');\n\n              case 5:\n                // If no \"to\" directory is provided, use the \"from\" directory\n                if (!toDirectory) {\n                  toDirectory = fromDirectory;\n                }\n\n                fromPath = this.getPath(fromDirectory, from);\n                toPath = this.getPath(toDirectory, to); // Test that the \"to\" and \"from\" locations are different\n\n                if (!(fromPath === toPath)) {\n                  _context19.next = 10;\n                  break;\n                }\n\n                return _context19.abrupt(\"return\");\n\n              case 10:\n                if (!toPath.startsWith(fromPath)) {\n                  _context19.next = 12;\n                  break;\n                }\n\n                throw Error('To path cannot contain the from path');\n\n              case 12:\n                _context19.prev = 12;\n                _context19.next = 15;\n                return this.stat({\n                  path: to,\n                  directory: toDirectory\n                });\n\n              case 15:\n                toObj = _context19.sent;\n                _context19.next = 29;\n                break;\n\n              case 18:\n                _context19.prev = 18;\n                _context19.t0 = _context19[\"catch\"](12);\n                // To location does not exist, ensure the directory containing \"to\" location exists and is a directory\n                toPathComponents = to.split('/');\n                toPathComponents.pop();\n                _toPath = toPathComponents.join('/'); // Check the containing directory of the \"to\" location exists\n\n                if (!(toPathComponents.length > 0)) {\n                  _context19.next = 29;\n                  break;\n                }\n\n                _context19.next = 26;\n                return this.stat({\n                  path: _toPath,\n                  directory: toDirectory\n                });\n\n              case 26:\n                toParentDirectory = _context19.sent;\n\n                if (!(toParentDirectory.type !== 'directory')) {\n                  _context19.next = 29;\n                  break;\n                }\n\n                throw new Error('Parent directory of the to path is a file');\n\n              case 29:\n                if (!(toObj && toObj.type === 'directory')) {\n                  _context19.next = 31;\n                  break;\n                }\n\n                throw new Error('Cannot overwrite a directory with a file');\n\n              case 31:\n                _context19.next = 33;\n                return this.stat({\n                  path: from,\n                  directory: fromDirectory\n                });\n\n              case 33:\n                fromObj = _context19.sent;\n\n                // Set the mtime/ctime of the supplied path\n                updateTime = /*#__PURE__*/function () {\n                  var _ref = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee18(path, ctime, mtime) {\n                    var fullPath, entry;\n                    return _Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee18$(_context18) {\n                      while (1) {\n                        switch (_context18.prev = _context18.next) {\n                          case 0:\n                            fullPath = _this3.getPath(toDirectory, path);\n                            _context18.next = 3;\n                            return _this3.dbRequest('get', [fullPath]);\n\n                          case 3:\n                            entry = _context18.sent;\n                            entry.ctime = ctime;\n                            entry.mtime = mtime;\n                            _context18.next = 8;\n                            return _this3.dbRequest('put', [entry]);\n\n                          case 8:\n                          case \"end\":\n                            return _context18.stop();\n                        }\n                      }\n                    }, _callee18);\n                  }));\n\n                  return function updateTime(_x18, _x19, _x20) {\n                    return _ref.apply(this, arguments);\n                  };\n                }();\n\n                ctime = fromObj.ctime ? fromObj.ctime : Date.now();\n                _context19.t1 = fromObj.type;\n                _context19.next = _context19.t1 === 'file' ? 39 : _context19.t1 === 'directory' ? 51 : 86;\n                break;\n\n              case 39:\n                _context19.next = 41;\n                return this.readFile({\n                  path: from,\n                  directory: fromDirectory\n                });\n\n              case 41:\n                file = _context19.sent;\n\n                if (!doRename) {\n                  _context19.next = 45;\n                  break;\n                }\n\n                _context19.next = 45;\n                return this.deleteFile({\n                  path: from,\n                  directory: fromDirectory\n                });\n\n              case 45:\n                _context19.next = 47;\n                return this.writeFile({\n                  path: to,\n                  directory: toDirectory,\n                  data: file.data\n                });\n\n              case 47:\n                if (!doRename) {\n                  _context19.next = 50;\n                  break;\n                }\n\n                _context19.next = 50;\n                return updateTime(to, ctime, fromObj.mtime);\n\n              case 50:\n                return _context19.abrupt(\"return\");\n\n              case 51:\n                if (!toObj) {\n                  _context19.next = 53;\n                  break;\n                }\n\n                throw Error('Cannot move a directory over an existing object');\n\n              case 53:\n                _context19.prev = 53;\n                _context19.next = 56;\n                return this.mkdir({\n                  path: to,\n                  directory: toDirectory,\n                  recursive: false\n                });\n\n              case 56:\n                if (!doRename) {\n                  _context19.next = 59;\n                  break;\n                }\n\n                _context19.next = 59;\n                return updateTime(to, ctime, fromObj.mtime);\n\n              case 59:\n                _context19.next = 63;\n                break;\n\n              case 61:\n                _context19.prev = 61;\n                _context19.t2 = _context19[\"catch\"](53);\n\n              case 63:\n                _context19.next = 65;\n                return this.readdir({\n                  path: from,\n                  directory: fromDirectory\n                });\n\n              case 65:\n                contents = _context19.sent.files;\n                _iterator2 = Object(_Users_rubendiaz_projects_hackaton_hack2_ionic_photogallery_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(contents);\n                _context19.prev = 67;\n\n                _iterator2.s();\n\n              case 69:\n                if ((_step2 = _iterator2.n()).done) {\n                  _context19.next = 75;\n                  break;\n                }\n\n                filename = _step2.value;\n                _context19.next = 73;\n                return this._copy({\n                  from: \"\".concat(from, \"/\").concat(filename),\n                  to: \"\".concat(to, \"/\").concat(filename),\n                  directory: fromDirectory,\n                  toDirectory: toDirectory\n                }, doRename);\n\n              case 73:\n                _context19.next = 69;\n                break;\n\n              case 75:\n                _context19.next = 80;\n                break;\n\n              case 77:\n                _context19.prev = 77;\n                _context19.t3 = _context19[\"catch\"](67);\n\n                _iterator2.e(_context19.t3);\n\n              case 80:\n                _context19.prev = 80;\n\n                _iterator2.f();\n\n                return _context19.finish(80);\n\n              case 83:\n                if (!doRename) {\n                  _context19.next = 86;\n                  break;\n                }\n\n                _context19.next = 86;\n                return this.rmdir({\n                  path: from,\n                  directory: fromDirectory\n                });\n\n              case 86:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee19, this, [[12, 18], [53, 61], [67, 77, 80, 83]]);\n      }));\n\n      function _copy(_x17) {\n        return _copy3.apply(this, arguments);\n      }\n\n      return _copy;\n    }()\n  }], [{\n    key: \"doUpgrade\",\n    value: function doUpgrade(event) {\n      var eventTarget = event.target;\n      var db = eventTarget.result;\n\n      switch (event.oldVersion) {\n        case 0:\n        case 1:\n        default:\n          {\n            if (db.objectStoreNames.contains('FileStorage')) {\n              db.deleteObjectStore('FileStorage');\n            }\n\n            var store = db.createObjectStore('FileStorage', {\n              keyPath: 'path'\n            });\n            store.createIndex('by_folder', 'folder');\n          }\n      }\n    }\n  }]);\n\n  return FilesystemWeb;\n}(_capacitor_core__WEBPACK_IMPORTED_MODULE_8__[/* WebPlugin */ \"c\"]);\nFilesystemWeb._debug = true;\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["../../src/web.ts"],"names":[],"mappings":"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","file":"x","sourcesContent":["import { WebPlugin } from '@capacitor/core';\nexport class FilesystemWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.DB_VERSION = 1;\n        this.DB_NAME = 'Disc';\n        this._writeCmds = ['add', 'put', 'delete'];\n    }\n    async initDb() {\n        if (this._db !== undefined) {\n            return this._db;\n        }\n        if (!('indexedDB' in window)) {\n            throw this.unavailable(\"This browser doesn't support IndexedDB\");\n        }\n        return new Promise((resolve, reject) => {\n            const request = indexedDB.open(this.DB_NAME, this.DB_VERSION);\n            request.onupgradeneeded = FilesystemWeb.doUpgrade;\n            request.onsuccess = () => {\n                this._db = request.result;\n                resolve(request.result);\n            };\n            request.onerror = () => reject(request.error);\n            request.onblocked = () => {\n                console.warn('db blocked');\n            };\n        });\n    }\n    static doUpgrade(event) {\n        const eventTarget = event.target;\n        const db = eventTarget.result;\n        switch (event.oldVersion) {\n            case 0:\n            case 1:\n            default: {\n                if (db.objectStoreNames.contains('FileStorage')) {\n                    db.deleteObjectStore('FileStorage');\n                }\n                const store = db.createObjectStore('FileStorage', { keyPath: 'path' });\n                store.createIndex('by_folder', 'folder');\n            }\n        }\n    }\n    async dbRequest(cmd, args) {\n        const readFlag = this._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';\n        return this.initDb().then((conn) => {\n            return new Promise((resolve, reject) => {\n                const tx = conn.transaction(['FileStorage'], readFlag);\n                const store = tx.objectStore('FileStorage');\n                const req = store[cmd](...args);\n                req.onsuccess = () => resolve(req.result);\n                req.onerror = () => reject(req.error);\n            });\n        });\n    }\n    async dbIndexRequest(indexName, cmd, args) {\n        const readFlag = this._writeCmds.indexOf(cmd) !== -1 ? 'readwrite' : 'readonly';\n        return this.initDb().then((conn) => {\n            return new Promise((resolve, reject) => {\n                const tx = conn.transaction(['FileStorage'], readFlag);\n                const store = tx.objectStore('FileStorage');\n                const index = store.index(indexName);\n                const req = index[cmd](...args);\n                req.onsuccess = () => resolve(req.result);\n                req.onerror = () => reject(req.error);\n            });\n        });\n    }\n    getPath(directory, uriPath) {\n        const cleanedUriPath = uriPath !== undefined ? uriPath.replace(/^[/]+|[/]+$/g, '') : '';\n        let fsPath = '';\n        if (directory !== undefined)\n            fsPath += '/' + directory;\n        if (uriPath !== '')\n            fsPath += '/' + cleanedUriPath;\n        return fsPath;\n    }\n    async clear() {\n        const conn = await this.initDb();\n        const tx = conn.transaction(['FileStorage'], 'readwrite');\n        const store = tx.objectStore('FileStorage');\n        store.clear();\n    }\n    /**\n     * Read a file from disk\n     * @param options options for the file read\n     * @return a promise that resolves with the read file data result\n     */\n    async readFile(options) {\n        const path = this.getPath(options.directory, options.path);\n        // const encoding = options.encoding;\n        const entry = (await this.dbRequest('get', [path]));\n        if (entry === undefined)\n            throw Error('File does not exist.');\n        return { data: entry.content ? entry.content : '' };\n    }\n    /**\n     * Write a file to disk in the specified location on device\n     * @param options options for the file write\n     * @return a promise that resolves with the file write result\n     */\n    async writeFile(options) {\n        const path = this.getPath(options.directory, options.path);\n        const data = options.data;\n        const doRecursive = options.recursive;\n        const occupiedEntry = (await this.dbRequest('get', [path]));\n        if (occupiedEntry && occupiedEntry.type === 'directory')\n            throw 'The supplied path is a directory.';\n        const encoding = options.encoding;\n        const parentPath = path.substr(0, path.lastIndexOf('/'));\n        const parentEntry = (await this.dbRequest('get', [parentPath]));\n        if (parentEntry === undefined) {\n            const subDirIndex = parentPath.indexOf('/', 1);\n            if (subDirIndex !== -1) {\n                const parentArgPath = parentPath.substr(subDirIndex);\n                await this.mkdir({\n                    path: parentArgPath,\n                    directory: options.directory,\n                    recursive: doRecursive,\n                });\n            }\n        }\n        const now = Date.now();\n        const pathObj = {\n            path: path,\n            folder: parentPath,\n            type: 'file',\n            size: data.length,\n            ctime: now,\n            mtime: now,\n            content: !encoding && data.indexOf(',') >= 0 ? data.split(',')[1] : data,\n        };\n        await this.dbRequest('put', [pathObj]);\n        return {\n            uri: pathObj.path,\n        };\n    }\n    /**\n     * Append to a file on disk in the specified location on device\n     * @param options options for the file append\n     * @return a promise that resolves with the file write result\n     */\n    async appendFile(options) {\n        const path = this.getPath(options.directory, options.path);\n        let data = options.data;\n        // const encoding = options.encoding;\n        const parentPath = path.substr(0, path.lastIndexOf('/'));\n        const now = Date.now();\n        let ctime = now;\n        const occupiedEntry = (await this.dbRequest('get', [path]));\n        if (occupiedEntry && occupiedEntry.type === 'directory')\n            throw 'The supplied path is a directory.';\n        const parentEntry = (await this.dbRequest('get', [parentPath]));\n        if (parentEntry === undefined) {\n            const subDirIndex = parentPath.indexOf('/', 1);\n            if (subDirIndex !== -1) {\n                const parentArgPath = parentPath.substr(subDirIndex);\n                await this.mkdir({\n                    path: parentArgPath,\n                    directory: options.directory,\n                    recursive: true,\n                });\n            }\n        }\n        if (occupiedEntry !== undefined) {\n            data = occupiedEntry.content + data;\n            ctime = occupiedEntry.ctime;\n        }\n        const pathObj = {\n            path: path,\n            folder: parentPath,\n            type: 'file',\n            size: data.length,\n            ctime: ctime,\n            mtime: now,\n            content: data,\n        };\n        await this.dbRequest('put', [pathObj]);\n    }\n    /**\n     * Delete a file from disk\n     * @param options options for the file delete\n     * @return a promise that resolves with the deleted file data result\n     */\n    async deleteFile(options) {\n        const path = this.getPath(options.directory, options.path);\n        const entry = (await this.dbRequest('get', [path]));\n        if (entry === undefined)\n            throw Error('File does not exist.');\n        const entries = await this.dbIndexRequest('by_folder', 'getAllKeys', [\n            IDBKeyRange.only(path),\n        ]);\n        if (entries.length !== 0)\n            throw Error('Folder is not empty.');\n        await this.dbRequest('delete', [path]);\n    }\n    /**\n     * Create a directory.\n     * @param options options for the mkdir\n     * @return a promise that resolves with the mkdir result\n     */\n    async mkdir(options) {\n        const path = this.getPath(options.directory, options.path);\n        const doRecursive = options.recursive;\n        const parentPath = path.substr(0, path.lastIndexOf('/'));\n        const depth = (path.match(/\\//g) || []).length;\n        const parentEntry = (await this.dbRequest('get', [parentPath]));\n        const occupiedEntry = (await this.dbRequest('get', [path]));\n        if (depth === 1)\n            throw Error('Cannot create Root directory');\n        if (occupiedEntry !== undefined)\n            throw Error('Current directory does already exist.');\n        if (!doRecursive && depth !== 2 && parentEntry === undefined)\n            throw Error('Parent directory must exist');\n        if (doRecursive && depth !== 2 && parentEntry === undefined) {\n            const parentArgPath = parentPath.substr(parentPath.indexOf('/', 1));\n            await this.mkdir({\n                path: parentArgPath,\n                directory: options.directory,\n                recursive: doRecursive,\n            });\n        }\n        const now = Date.now();\n        const pathObj = {\n            path: path,\n            folder: parentPath,\n            type: 'directory',\n            size: 0,\n            ctime: now,\n            mtime: now,\n        };\n        await this.dbRequest('put', [pathObj]);\n    }\n    /**\n     * Remove a directory\n     * @param options the options for the directory remove\n     */\n    async rmdir(options) {\n        const { path, directory, recursive } = options;\n        const fullPath = this.getPath(directory, path);\n        const entry = (await this.dbRequest('get', [fullPath]));\n        if (entry === undefined)\n            throw Error('Folder does not exist.');\n        if (entry.type !== 'directory')\n            throw Error('Requested path is not a directory');\n        const readDirResult = await this.readdir({ path, directory });\n        if (readDirResult.files.length !== 0 && !recursive)\n            throw Error('Folder is not empty');\n        for (const entry of readDirResult.files) {\n            const entryPath = `${path}/${entry}`;\n            const entryObj = await this.stat({ path: entryPath, directory });\n            if (entryObj.type === 'file') {\n                await this.deleteFile({ path: entryPath, directory });\n            }\n            else {\n                await this.rmdir({ path: entryPath, directory, recursive });\n            }\n        }\n        await this.dbRequest('delete', [fullPath]);\n    }\n    /**\n     * Return a list of files from the directory (not recursive)\n     * @param options the options for the readdir operation\n     * @return a promise that resolves with the readdir directory listing result\n     */\n    async readdir(options) {\n        const path = this.getPath(options.directory, options.path);\n        const entry = (await this.dbRequest('get', [path]));\n        if (options.path !== '' && entry === undefined)\n            throw Error('Folder does not exist.');\n        const entries = await this.dbIndexRequest('by_folder', 'getAllKeys', [IDBKeyRange.only(path)]);\n        const names = entries.map(e => {\n            return e.substring(path.length + 1);\n        });\n        return { files: names };\n    }\n    /**\n     * Return full File URI for a path and directory\n     * @param options the options for the stat operation\n     * @return a promise that resolves with the file stat result\n     */\n    async getUri(options) {\n        const path = this.getPath(options.directory, options.path);\n        let entry = (await this.dbRequest('get', [path]));\n        if (entry === undefined) {\n            entry = (await this.dbRequest('get', [path + '/']));\n        }\n        return {\n            uri: (entry === null || entry === void 0 ? void 0 : entry.path) || path,\n        };\n    }\n    /**\n     * Return data about a file\n     * @param options the options for the stat operation\n     * @return a promise that resolves with the file stat result\n     */\n    async stat(options) {\n        const path = this.getPath(options.directory, options.path);\n        let entry = (await this.dbRequest('get', [path]));\n        if (entry === undefined) {\n            entry = (await this.dbRequest('get', [path + '/']));\n        }\n        if (entry === undefined)\n            throw Error('Entry does not exist.');\n        return {\n            type: entry.type,\n            size: entry.size,\n            ctime: entry.ctime,\n            mtime: entry.mtime,\n            uri: entry.path,\n        };\n    }\n    /**\n     * Rename a file or directory\n     * @param options the options for the rename operation\n     * @return a promise that resolves with the rename result\n     */\n    async rename(options) {\n        return this._copy(options, true);\n    }\n    /**\n     * Copy a file or directory\n     * @param options the options for the copy operation\n     * @return a promise that resolves with the copy result\n     */\n    async copy(options) {\n        return this._copy(options, false);\n    }\n    async requestPermissions() {\n        return { publicStorage: 'granted' };\n    }\n    async checkPermissions() {\n        return { publicStorage: 'granted' };\n    }\n    /**\n     * Function that can perform a copy or a rename\n     * @param options the options for the rename operation\n     * @param doRename whether to perform a rename or copy operation\n     * @return a promise that resolves with the result\n     */\n    async _copy(options, doRename = false) {\n        let { toDirectory } = options;\n        const { to, from, directory: fromDirectory } = options;\n        if (!to || !from) {\n            throw Error('Both to and from must be provided');\n        }\n        // If no \"to\" directory is provided, use the \"from\" directory\n        if (!toDirectory) {\n            toDirectory = fromDirectory;\n        }\n        const fromPath = this.getPath(fromDirectory, from);\n        const toPath = this.getPath(toDirectory, to);\n        // Test that the \"to\" and \"from\" locations are different\n        if (fromPath === toPath) {\n            return;\n        }\n        if (toPath.startsWith(fromPath)) {\n            throw Error('To path cannot contain the from path');\n        }\n        // Check the state of the \"to\" location\n        let toObj;\n        try {\n            toObj = await this.stat({\n                path: to,\n                directory: toDirectory,\n            });\n        }\n        catch (e) {\n            // To location does not exist, ensure the directory containing \"to\" location exists and is a directory\n            const toPathComponents = to.split('/');\n            toPathComponents.pop();\n            const toPath = toPathComponents.join('/');\n            // Check the containing directory of the \"to\" location exists\n            if (toPathComponents.length > 0) {\n                const toParentDirectory = await this.stat({\n                    path: toPath,\n                    directory: toDirectory,\n                });\n                if (toParentDirectory.type !== 'directory') {\n                    throw new Error('Parent directory of the to path is a file');\n                }\n            }\n        }\n        // Cannot overwrite a directory\n        if (toObj && toObj.type === 'directory') {\n            throw new Error('Cannot overwrite a directory with a file');\n        }\n        // Ensure the \"from\" object exists\n        const fromObj = await this.stat({\n            path: from,\n            directory: fromDirectory,\n        });\n        // Set the mtime/ctime of the supplied path\n        const updateTime = async (path, ctime, mtime) => {\n            const fullPath = this.getPath(toDirectory, path);\n            const entry = (await this.dbRequest('get', [fullPath]));\n            entry.ctime = ctime;\n            entry.mtime = mtime;\n            await this.dbRequest('put', [entry]);\n        };\n        const ctime = fromObj.ctime ? fromObj.ctime : Date.now();\n        switch (fromObj.type) {\n            // The \"from\" object is a file\n            case 'file': {\n                // Read the file\n                const file = await this.readFile({\n                    path: from,\n                    directory: fromDirectory,\n                });\n                // Optionally remove the file\n                if (doRename) {\n                    await this.deleteFile({\n                        path: from,\n                        directory: fromDirectory,\n                    });\n                }\n                // Write the file to the new location\n                await this.writeFile({\n                    path: to,\n                    directory: toDirectory,\n                    data: file.data,\n                });\n                // Copy the mtime/ctime of a renamed file\n                if (doRename) {\n                    await updateTime(to, ctime, fromObj.mtime);\n                }\n                // Resolve promise\n                return;\n            }\n            case 'directory': {\n                if (toObj) {\n                    throw Error('Cannot move a directory over an existing object');\n                }\n                try {\n                    // Create the to directory\n                    await this.mkdir({\n                        path: to,\n                        directory: toDirectory,\n                        recursive: false,\n                    });\n                    // Copy the mtime/ctime of a renamed directory\n                    if (doRename) {\n                        await updateTime(to, ctime, fromObj.mtime);\n                    }\n                }\n                catch (e) {\n                    // ignore\n                }\n                // Iterate over the contents of the from location\n                const contents = (await this.readdir({\n                    path: from,\n                    directory: fromDirectory,\n                })).files;\n                for (const filename of contents) {\n                    // Move item from the from directory to the to directory\n                    await this._copy({\n                        from: `${from}/${filename}`,\n                        to: `${to}/${filename}`,\n                        directory: fromDirectory,\n                        toDirectory,\n                    }, doRename);\n                }\n                // Optionally remove the original from directory\n                if (doRename) {\n                    await this.rmdir({\n                        path: from,\n                        directory: fromDirectory,\n                    });\n                }\n            }\n        }\n    }\n}\nFilesystemWeb._debug = true;\n//# sourceMappingURL=web.js.map"]}}